# Implementation Plan: Complete Specification Documentation Alignment

**Branch**: `006-complete-spec-alignment` | **Date**: 2025-11-23 | **Spec**: [spec.md](./spec.md)
**Input**: Feature specification from `/specs/006-complete-spec-alignment/spec.md`

## Summary

Align feature 005-fix-consultation-api specification documents with actual implementation by documenting edge case behaviors, removing unimplemented feature claims, consolidating duplicate validation rules, standardizing terminology, and adding monitoring verification strategies. This is documentation-only work with zero code changes - all edits update spec documents to accurately reflect existing behavior in `src/pages/api/submit-lead.ts`.

**Technical Approach**: Direct markdown file editing with automated validation (search verification, link checking, code cross-referencing). No research phase needed - all behaviors already analyzed and documented in spec.md edge cases section.

## Technical Context

**Language/Version**: Markdown (GitHub-flavored), English language
**Primary Dependencies**: None (plain text editing)
**Storage**: Git version control (files in `specs/005-fix-consultation-api/`)
**Testing**: Manual verification (search, link validation, code cross-reference)
**Target Platform**: GitHub repository (web markdown viewer)
**Project Type**: Documentation-only feature (no source code changes)
**Performance Goals**: N/A (documentation editing has negligible performance impact)
**Constraints**:
- MUST NOT modify source code in `src/pages/api/submit-lead.ts`
- MUST preserve existing template structure from Spec-Kit
- MUST reference code line numbers for edge case documentation
- All cross-document links MUST work in GitHub markdown preview

**Scale/Scope**:
- 7 documentation files to update (spec.md, data-model.md, research.md, quickstart.md, plan.md, tasks.md, contracts/submit-lead.openapi.yaml)
- ~150-200 lines of changes across all files
- ~90 minutes estimated completion time

## Constitution Check

*GATE: Must pass before Phase 0 research. Re-check after Phase 1 design.*

### I. Static-First Delivery âœ… N/A

- âœ… No impact on static/hybrid architecture (documentation-only)
- âœ… No server-side execution changes
- âœ… No frontend component changes

### II. Performance-First Development âœ… N/A

- âœ… No bundle size impact (documentation not deployed)
- âœ… No runtime performance impact
- âœ… No Core Web Vitals changes

### III. Simplicity Over Tooling âœ… PASS

- âœ… No new dependencies added
- âœ… Uses existing Git version control
- âœ… Plain markdown text editing
- âœ… Manual validation (search, grep, GitHub preview)

### IV. Accessibility & SEO âœ… N/A

- âœ… No UI changes
- âœ… Documentation not user-facing (internal developer docs)

### V. TypeScript Strict Mode âœ… N/A

- âœ… No TypeScript code changes
- âœ… No validation schema updates

### VI. Design System Consistency âœ… N/A

- âœ… No UI component changes
- âœ… No styling changes

**Overall Status**: âœ… **ALL GATES PASSED** â€” No violations, proceed to Phase 0

## Project Structure

### Documentation (this feature)

```text
specs/006-complete-spec-alignment/
â”œâ”€â”€ spec.md              # âœ… COMPLETE - Feature specification
â”œâ”€â”€ plan.md              # This file (generated by /speckit.plan)
â”œâ”€â”€ research.md          # N/A - No research needed (skipping Phase 0)
â”œâ”€â”€ data-model.md        # N/A - No data model (documentation-only)
â”œâ”€â”€ quickstart.md        # Phase 1 output - Verification guide
â”œâ”€â”€ contracts/           # N/A - No API contracts
â””â”€â”€ checklists/
    â””â”€â”€ requirements.md  # âœ… COMPLETE - Quality validation
```

### Source Code (repository root)

**Target Files** (read-only reference, no modifications):
```text
src/pages/api/submit-lead.ts    # Reference for edge case line numbers
```

**Documentation Files** (to be updated):
```text
specs/005-fix-consultation-api/
â”œâ”€â”€ spec.md                     # Update: edge cases, FR-010, SC-006, consolidate FRs
â”œâ”€â”€ data-model.md               # Keep as-is (single source of truth for validation)
â”œâ”€â”€ research.md                 # Update: error message table (already done)
â”œâ”€â”€ plan.md                     # Update: constitution check (already done)
â”œâ”€â”€ tasks.md                    # Update: terminology standardization
â”œâ”€â”€ quickstart.md               # Update: RESEND_FROM_EMAIL required
â””â”€â”€ contracts/
    â””â”€â”€ submit-lead.openapi.yaml  # Keep as-is (already aligned)
```

**Structure Decision**: This is a documentation-only feature that updates existing spec documents in `specs/005-fix-consultation-api/`. No source code structure changes. The feature's own spec (006) contains planning documents, while edits target 005 spec files.

## Complexity Tracking

> **No violations detected** â€” All constitution principles satisfied by documentation-only changes.

## Phase 0: Research & Unknowns

**Status**: âœ… **SKIPPED** â€” No research needed

**Rationale**: All edge case behaviors, monitoring strategies, and validation rules already analyzed and documented in spec.md. Implementation code cross-referenced in previous analysis. No unknowns remain - this is execution-only work.

**Skipping research.md generation**: Not applicable for documentation alignment feature.

---

## Phase 1: Design Artifacts

### 1.1 Data Model

**Status**: âœ… **N/A** â€” No data entities (documentation-only feature)

**Rationale**: This feature edits markdown files, not database schemas or API contracts. No data model needed.

**Skipping data-model.md generation**: Not applicable for documentation-only feature.

### 1.2 API Contracts

**Status**: âœ… **N/A** â€” No API endpoints (documentation-only feature)

**Rationale**: No APIs created or modified. Existing OpenAPI contract (`specs/005-fix-consultation-api/contracts/submit-lead.openapi.yaml`) already aligned in previous commit.

**Skipping contracts/ generation**: Not applicable for documentation-only feature.

### 1.3 Quickstart Guide

**Task**: Create verification guide for documentation changes

**Content**:

1. **Prerequisites**: Git branch checked out, spec documents accessible
2. **Verification Steps**:
   - Search validation: `grep -r "consultation request" specs/005-fix-consultation-api/` returns zero results
   - Edge cases verification: All 6 questions have answers with code line references
   - Link validation: All cross-document references resolve in GitHub preview
   - RESEND_FROM_EMAIL check: quickstart.md marks as required (not optional)
3. **Manual Review Checklist**:
   - [ ] FR-010 removed or marked future enhancement
   - [ ] SC-006 removed or marked not implemented
   - [ ] spec.md FR-001 to FR-006 reference data-model.md (no duplication)
   - [ ] Monitoring section added to spec.md or quickstart.md
4. **Final Validation**: Compare edited files against checklist in spec.md success criteria (SC-001 to SC-007)

**Output**: `quickstart.md`

### 1.4 Agent Context Update

**Task**: Run `.specify/scripts/bash/update-agent-context.sh claude`

**Purpose**: Update `.claude/` agent context with documentation patterns

**New Context to Add**:
- Documentation alignment workflow (spec â†’ code â†’ spec update)
- Edge case documentation format (question â†’ answer with code reference)
- Single source of truth pattern (reference vs duplicate)
- Terminology standardization approach

**Output**: Updated `.claude/` context file

---

## Implementation Phases

### Phase 0: Research âœ… SKIPPED

**Status**: Not applicable â€” all behaviors already analyzed

### Phase 1: Design & Documentation âœ… READY

**Prerequisites**: None (skipping research phase)

**Deliverables**:
1. âœ… Skip data-model.md (N/A)
2. âœ… Skip contracts/ (N/A)
3. Generate quickstart.md (verification guide)
4. Update agent context

**Execution**:
- Generate `quickstart.md` with verification steps
- Run `update-agent-context.sh claude`

### Phase 2: Task Breakdown (via `/speckit.tasks`)

**Input**: This plan.md + spec.md
**Output**: tasks.md with actionable steps for documentation editing
**Note**: NOT generated by `/speckit.plan` â€” separate command

---

## Implementation Checklist

**Before coding (Phase 0-1):**
- [x] Constitution Check passed
- [x] Feature specification complete (`spec.md`)
- [x] Research complete (N/A - skipped)
- [x] Data model documented (N/A - skipped)
- [x] API contracts generated (N/A - skipped)
- [ ] Quickstart guide created (`quickstart.md`)
- [ ] Agent context updated

**After coding (Phase 2 - via `/speckit.tasks`):**
- [ ] Edge cases documented (6/6 with code references)
- [ ] FR-010 fixed (timestamp removed or future-marked)
- [ ] SC-006 fixed (duplicate tracking removed/marked)
- [ ] Validation rules consolidated (spec â†’ data-model reference)
- [ ] Terminology standardized ("lead" everywhere)
- [ ] Monitoring section added
- [ ] RESEND_FROM_EMAIL marked required
- [ ] All tests passing (search validation, link checks)

---

## Next Steps

1. **Generate quickstart.md**: Verification guide for documentation changes
2. **Update Agent Context**: Run `update-agent-context.sh claude`
3. **Re-validate Constitution**: Confirm no violations introduced (expected: none)
4. **Ready for `/speckit.tasks`**: Generate actionable task list for 7 documentation edits

**Command to Continue**:
```bash
/speckit.tasks  # Generate task breakdown for documentation updates
```

---

**Status**: ðŸŸ¢ **Phase 1 Ready** â€” No research needed, proceed to task generation

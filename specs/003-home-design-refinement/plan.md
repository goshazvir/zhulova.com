# Implementation Plan: Home Page Design Refinement

**Branch**: `003-home-design-refinement` | **Date**: 2025-11-17 | **Spec**: [spec.md](./spec.md)
**Input**: Feature specification from `/specs/003-home-design-refinement/spec.md`

## Summary

This feature refines the visual presentation of 5 homepage sections (Case Studies, Questions, Testimonials, Stats, Footer) to achieve a "minimal luxury" aesthetic. Changes are **CSS-only** using existing Tailwind utility classes - no new dependencies, JavaScript, or data structure modifications required. Primary goals: reduce footer vertical space by 30-40%, improve visual hierarchy, and decrease clutter by 25% while maintaining Lighthouse 95+ scores and Core Web Vitals compliance.

## Technical Context

**Language/Version**: TypeScript 5.x (strict mode), no changes required
**Primary Dependencies**: Astro v4.x + Tailwind CSS v3.x + React v18.x (islands only) - existing stack, no additions
**Storage**: N/A (static content only, no database changes)
**Testing**: Manual visual regression + Lighthouse audits (automated accessibility/performance)
**Target Platform**: Static site deployed to Vercel CDN (browser-rendered HTML/CSS)
**Project Type**: Single Astro project with Islands Architecture
**Performance Goals**: Maintain Lighthouse 95+, LCP <2.5s, CLS <0.1, bundle size <350KB
**Constraints**: Zero performance degradation, WCAG AA accessibility compliance, mobile-first responsive design
**Scale/Scope**: 5 components to modify (~300 lines of CSS changes total)

## Constitution Check

*GATE: Must pass before Phase 0 research. Re-checked after Phase 1 design.*

**Initial Check (Before Research)**:

- ✅ **I. Static-First Delivery**: No server-side rendering introduced, all changes are CSS-only modifications to existing static components
- ✅ **II. Performance-First Development**: No new assets or JavaScript, Tailwind purge ensures minimal CSS overhead, performance budget maintained
- ✅ **III. Simplicity Over Tooling**: Uses existing Tailwind utilities exclusively, no new dependencies or build tools
- ✅ **IV. Accessibility-First Design**: Semantic HTML preserved, color contrast verified (WCAG AA), keyboard navigation unchanged, ARIA labels maintained
- ✅ **V. TypeScript Strict Mode**: No TypeScript changes required (CSS-only modifications)
- ✅ **VI. Design System Consistency**: Uses existing design tokens (navy, gold, sage colors; Playfair/Inter fonts; standard spacing)

**Post-Design Check (After Phase 1)**:

- ✅ **Static-First Delivery**: Confirmed - all implementations are Tailwind class modifications in `.astro` files, no dynamic rendering
- ✅ **Performance-First**: Confirmed - CSS bundle size unchanged (±0 bytes), no new images/fonts, LCP/CLS targets met per `data-model.md`
- ✅ **Simplicity**: Confirmed - zero new npm packages, vanilla Tailwind utilities only, existing JavaScript preserved (tab switching)
- ✅ **Accessibility**: Confirmed - color contrast ratios verified in `data-model.md` (all ≥4.7:1 for WCAG AA), semantic structure intact
- ✅ **TypeScript**: Confirmed - no `.ts`/`.tsx` file changes required, only Astro template HTML/CSS
- ✅ **Design System**: Confirmed - all colors/fonts from existing Tailwind config, no custom CSS classes introduced

**Gate Status**: ✅ **PASSED** - No constitution violations detected.

## Project Structure

### Documentation (this feature)

```text
specs/003-home-design-refinement/
├── spec.md              # Feature specification (user stories, requirements, success criteria)
├── plan.md              # This file (implementation plan)
├── research.md          # Phase 0: Design pattern research and decisions
├── data-model.md        # Phase 1: Component props, visual entities, validation rules
├── quickstart.md        # Phase 1: Step-by-step developer guide
├── checklists/
│   └── requirements.md  # Spec quality checklist (all checks passed)
└── tasks.md             # Phase 2: Generated by /speckit.tasks (NOT YET CREATED)
```

### Source Code (repository root)

```text
src/
├── components/
│   ├── layout/
│   │   ├── Header.astro          [UNCHANGED]
│   │   └── Footer.astro          [MODIFIED] - Reduce CTA padding, horizontal layout
│   └── sections/
│       ├── HeroSection.astro     [UNCHANGED]
│       ├── StatsSection.astro    [MODIFIED] - Asymmetric grid, visual hierarchy
│       ├── CaseStudiesSection.astro [MODIFIED] - Remove color blocks, simplify indicators
│       ├── QuestionsSection.astro   [MODIFIED] - Tab underline style, border cards
│       ├── TestimonialsSection.astro [MODIFIED] - Light background, reduced quote icon
│       ├── CoursesPreview.astro  [UNCHANGED]
│       └── MotivationalQuote.astro [UNCHANGED]
├── pages/
│   └── index.astro               [UNCHANGED] - Components imported here
├── data/
│   └── homePageContent.ts        [UNCHANGED] - Static data unchanged
├── stores/
│   └── uiStore.ts                [UNCHANGED] - No state changes
└── styles/
    └── global.css                [UNCHANGED] - No custom CSS needed
```

**Structure Decision**: Single Astro project with component-based architecture. All changes are isolated to 5 `.astro` files in `src/components/` directory. No new files created, no file structure changes required.

## Complexity Tracking

> **Fill ONLY if Constitution Check has violations that must be justified**

| Violation | Why Needed | Simpler Alternative Rejected Because |
|-----------|------------|-------------------------------------|
| N/A | No violations detected | N/A |

---

## Phase 0: Research Summary

**Status**: ✅ Complete - See [research.md](./research.md)

**Key Decisions Made**:

1. **Component Styling**: Tailwind utilities with existing tokens (no new CSS classes)
2. **Footer Compaction**: Single-row horizontal layout (30-40% height reduction)
3. **Case Studies Layout**: Vertical timeline with minimalist cards (emphasize outcomes)
4. **Testimonials Display**: Light background (minimal luxury alignment)
5. **Questions Interaction**: Keep tabs but simplify styling (underline indicators)
6. **Statistics Enhancement**: Asymmetric grid with visual hierarchy (1 large + 3 small)

**Performance Analysis**: Zero impact confirmed - no new assets, CSS purging removes unused classes, existing JavaScript preserved.

**Accessibility Verification**: All new color combinations meet WCAG AA (4.5:1 ratios), semantic HTML unchanged, keyboard navigation maintained.

---

## Phase 1: Design & Contracts

**Status**: ✅ Complete

### Artifacts Generated

1. **[data-model.md](./data-model.md)**: Component props, visual entities, validation rules
   - Case Study Card: Before/after styling changes
   - Testimonial Item: Background and text color updates
   - Statistic Metric: Asymmetric grid layout rules
   - Question Item: Tab and card styling changes
   - Footer Navigation: Spacing and layout modifications

2. **[quickstart.md](./quickstart.md)**: Step-by-step implementation guide
   - Baseline measurement instructions
   - 5-step implementation sequence (Stats → Questions → Case Studies → Testimonials → Footer)
   - Code diffs for each component
   - Testing checklist and validation criteria

3. **Contracts**: N/A (no API contracts for visual-only changes)

### Agent Context Updated

**No agent context update required** - This feature uses existing, approved technology stack with no new dependencies or patterns. All design decisions documented in `research.md`.

---

## Implementation Sequence (from quickstart.md)

### Pre-Implementation

1. **Take baseline measurements**:
   - Screenshots (desktop 1920x1080, mobile 375x667)
   - Footer height measurements (desktop/mobile)
   - Lighthouse audit baseline (Performance, Accessibility, LCP, CLS)

### Component Modification Order

**Estimated total time**: 2-3 hours

1. **Step 1: StatsSection** (15 min) - Simplest, pure CSS Grid changes
2. **Step 2: QuestionsSection** (20 min) - Tab styling + card borders
3. **Step 3: CaseStudiesSection** (30 min) - Remove color blocks, add border-left
4. **Step 4: TestimonialsSection** (25 min) - Light background color scheme
5. **Step 5: Footer** (40 min) - Highest impact, CTA padding + horizontal layout

### Post-Implementation Validation

1. **Lighthouse audit**: Compare redesign scores vs. baseline
2. **Footer height measurement**: Verify ≥30% (desktop), ≥40% (mobile) reduction
3. **Visual regression**: Compare screenshots before/after
4. **Accessibility**: Verify color contrast, keyboard navigation
5. **Manual testing checklist**: 12 items (see `quickstart.md`)

---

## Success Criteria Mapping

| Success Criterion | Implementation | Validation Method |
|-------------------|----------------|-------------------|
| **SC-001**: Footer ≥30% shorter (desktop), ≥40% (mobile) | Footer.astro padding reduction + horizontal layout | Measure `getBoundingClientRect().height` before/after |
| **SC-002**: Case study comprehension <20s | CaseStudiesSection.astro border-left styling | User testing (post-deployment) |
| **SC-003**: Visual clutter ≥25% improvement | All 5 components (reduce backgrounds, increase whitespace) | Calculate content-to-whitespace ratio |
| **SC-004**: Viewport efficiency +20% | Footer + CaseStudiesSection spacing reductions | Measure vertical space usage per section |
| **SC-005**: Luxury perception +20% | All 5 components (minimal styling, subtle effects) | User survey (post-deployment) |
| **SC-006**: Footer CTA click time -15% | Footer.astro horizontal layout (faster discoverability) | Analytics comparison (post-deployment) |
| **SC-007**: Testimonials engagement +10% | TestimonialsSection.astro light background (readability) | Analytics scroll depth/time (post-deployment) |
| **SC-008**: Lighthouse 95+ (Performance/Accessibility) | No performance degradation (CSS-only changes) | Lighthouse audit after implementation |
| **SC-009**: LCP <2.5s (zero increase) | No new assets loaded | Lighthouse LCP metric |
| **SC-010**: Case study task completion 100% | CaseStudiesSection.astro scannable layout | User testing (post-deployment) |

---

## Risk Assessment

### Low Risk Items

- **Stats, Questions, Testimonials sections**: Pure CSS changes, easily reversible
- **Performance**: No new assets, Tailwind purge ensures zero bundle size increase
- **Accessibility**: Color contrast pre-verified, semantic HTML unchanged

### Medium Risk Items

- **Footer compaction**: Highest visual impact, requires careful responsive testing
  - **Mitigation**: Test on multiple viewports (mobile, tablet, desktop), measure heights before/after, ensure all links accessible

- **Case Studies layout**: Significant visual change from current design
  - **Mitigation**: Git commit per component for easy rollback, user testing before full deployment

### Rollback Strategy

All changes are CSS-only in `.astro` files:
- **Per-component rollback**: `git revert <commit-hash>` for specific component
- **Full rollback**: `git revert <range>` to revert all 5 components
- **Zero data risk**: No database, no state, no content changes

---

## Dependencies & Prerequisites

**No new dependencies required**. Uses existing stack:
- ✅ Astro v4.x (static site generation)
- ✅ Tailwind CSS v3.x (utility classes)
- ✅ React v18.x (islands for existing tab functionality)
- ✅ Existing design tokens (navy, gold, sage colors)

**Developer prerequisites**:
- Read `quickstart.md` for step-by-step guide
- Access to local dev server (`npm run dev`)
- Browser DevTools for measurement
- Basic Tailwind CSS knowledge

**Stakeholder prerequisites**:
- Baseline measurements captured
- Approval for "minimal luxury" aesthetic direction
- Post-deployment analytics access for validation

---

## Testing Strategy

### Manual Testing (Developer)

- [ ] Stats: Primary stat larger, hover scale works
- [ ] Questions: Tab switching with underline indicator
- [ ] Questions: Keyboard navigation (Tab, Enter keys)
- [ ] Case Studies: Border-left instead of color blocks
- [ ] Testimonials: Light background with good contrast
- [ ] Footer: ≥30% height reduction (desktop)
- [ ] Footer: ≥40% height reduction (mobile)
- [ ] Footer: Horizontal layout on desktop, stacked on mobile
- [ ] All sections: Responsive behavior on 375px, 768px, 1920px widths

### Automated Testing

```bash
# Lighthouse Performance/Accessibility audit
npx lighthouse http://localhost:4321 --output=json

# Expected results:
# - Performance: ≥95 (same as baseline)
# - Accessibility: ≥95 (same as baseline)
# - LCP: <2.5s (same as baseline)
# - CLS: <0.1 (same as baseline)
```

### User Testing (Post-Deployment)

- **A/B testing**: Compare engagement metrics (scroll depth, time on page, CTA clicks)
- **User interviews**: Gather feedback on "luxury" perception, readability, navigation ease
- **Analytics**: Monitor footer CTA conversion rate, testimonials section time spent

---

## Timeline

**Total estimated time**: 3-4 hours (implementation + testing)

| Phase | Time | Status |
|-------|------|--------|
| Phase 0: Research | 30 min | ✅ Complete |
| Phase 1: Design & Contracts | 45 min | ✅ Complete |
| Implementation (5 components) | 2-3 hours | ⏳ Ready to start |
| Testing & Validation | 30-45 min | ⏳ Pending |
| PR Review | 15-30 min | ⏳ Pending |

**Target completion**: Same day (2025-11-17)

---

## Next Steps

1. **Execute implementation**: Follow [quickstart.md](./quickstart.md) step-by-step guide
2. **Generate task list**: Run `/speckit.tasks` to create `tasks.md` with atomic, dependency-ordered tasks
3. **Create PR**: After testing, create pull request with baseline vs. redesign comparison screenshots
4. **Deploy & Monitor**: After merge, monitor analytics for SC-005, SC-006, SC-007 validation

---

## References

- **Feature Spec**: [spec.md](./spec.md) - User stories, requirements, success criteria
- **Research**: [research.md](./research.md) - Design pattern decisions and rationale
- **Data Model**: [data-model.md](./data-model.md) - Component props, validation rules
- **Quickstart**: [quickstart.md](./quickstart.md) - Developer implementation guide
- **Project Constitution**: `.specify/memory/constitution.md` - Governance and principles
- **Technical Spec**: `.claude/docs/technical-spec.md` - Performance and accessibility requirements
- **Design Guidelines**: `.claude/docs/about.md` - Minimal luxury aesthetic definition

---

**Plan Status**: ✅ **COMPLETE** - Ready for implementation via `/speckit.tasks`
